<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI共创人生 - 性格评估测试</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .content {
            padding: 40px;
        }
        
        .intro-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .intro-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .intro-section p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .start-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            margin-top: 20px;
        }
        
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }
        
        .question-container {
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.6s ease forwards;
        }
        
        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .question {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
            line-height: 1.6;
        }
        
        .options {
            display: grid;
            gap: 10px;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }
        
        .option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .option.selected {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: 2px solid #0066cc;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            transition: width 0.3s ease;
            z-index: 1000;
        }
        
        /* 结果预览样式 */
        .preview-results {
            display: none;
        }
        
        .preview-header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .preview-header h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .personality-type {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .personality-type h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        
        .dimension-preview {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .dimension-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .dimension-name {
            font-size: 1.2em;
            font-weight: 600;
            color: #4facfe;
        }
        
        .dimension-score {
            font-size: 1.5em;
            font-weight: 700;
            color: #333;
        }
        
        .score-bar {
            background: #e0e0e0;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 6px;
            transition: width 1s ease;
        }
        
        .preview-text {
            color: #666;
            line-height: 1.6;
            margin-top: 10px;
        }
        
        .blurred-content {
            position: relative;
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }
        
        .blur-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .unlock-badge {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        
        .cta-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-top: 40px;
        }
        
        .cta-section h3 {
            font-size: 1.8em;
            margin-bottom: 20px;
        }
        
        .cta-section ul {
            text-align: left;
            max-width: 500px;
            margin: 20px auto;
            line-height: 2;
        }
        
        .cta-section li {
            margin-bottom: 10px;
        }
        
        .price {
            font-size: 2.5em;
            font-weight: 700;
            margin: 20px 0;
            color: #FFD700;
        }
        
        .unlock-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 18px 50px;
            font-size: 1.3em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }
        
        .unlock-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        /* 支付表单弹窗 */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .payment-modal.active {
            display: flex;
        }
        
        .payment-form {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .payment-form h3 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .payment-form input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }
        
        .payment-form input:focus {
            outline: none;
            border-color: #4facfe;
        }
        
        .pay-btn {
            width: 100%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .pay-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }
        
        .close-modal {
            text-align: center;
            margin-top: 15px;
            color: #999;
            cursor: pointer;
        }
        
        .close-modal:hover {
            color: #666;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            .content {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="progress" id="progress"></div>
    
    <div class="container">
        <div class="header">
            <h1>🧠 AI共创人生</h1>
            <p>专业性格评估测试</p>
        </div>
        
        <div class="content">
            <!-- 介绍和开始按钮 -->
            <div class="intro-section" id="introSection">
                <h2>🌟 发现您的AI时代独特优势</h2>
                <p>30道科学问题，5分钟深度测试</p>
                <p>立即了解您在AI时代的性格优势和发展方向</p>
                <p style="margin-top: 20px; font-size: 0.9em; color: #999;">
                    ✓ 无需注册 ✓ 立即开始 ✓ 免费预览结果
                </p>
                <button class="start-btn" onclick="startTest()">开始免费测试</button>
            </div>
            
            <!-- 测试表单 -->
            <form id="personalityTest" style="display: none;">
                <!-- 问题将通过JavaScript动态生成 -->
            </form>
            
            <!-- 结果预览 -->
            <div class="preview-results" id="previewResults">
                <div class="preview-header">
                    <h2>🎉 您的性格分析结果</h2>
                    <p>以下是您的基础分析预览</p>
                </div>
                
                <div class="personality-type" id="personalityType">
                    <!-- 性格类型将动态填充 -->
                </div>
                
                <div id="dimensionsPreview">
                    <!-- 维度预览将动态填充 -->
                </div>
                
                <!-- CTA区域 -->
                <div class="cta-section">
                    <h3>📊 想要完整的3000字专业报告？</h3>
                    <ul>
                        <li>✓ 每个维度的深度解析和具体案例</li>
                        <li>✓ AI时代职业发展建议和路径规划</li>
                        <li>✓ 30天行动计划和可执行步骤</li>
                        <li>✓ 推荐资源和学习路径</li>
                        <li>✓ 王博士专业点评</li>
                        <li>✓ 永久保存，随时查阅</li>
                    </ul>
                    <div class="price">$19</div>
                    <p style="font-size: 0.9em; opacity: 0.9;">Beta测试特价 | 原价 $49</p>
                    <button class="unlock-btn" onclick="showPaymentModal()">获取完整报告</button>
                    <p style="font-size: 0.9em; margin-top: 20px; opacity: 0.8;">
                        🔒 支付安全由Stripe保护 | 💯 不满意全额退款
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 支付弹窗 -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-form">
            <h3>📧 接收完整报告</h3>
            <p style="text-align: center; color: #666; margin-bottom: 20px;">
                报告将发送到您的邮箱
            </p>
            <input type="email" id="userEmail" placeholder="您的邮箱地址" required>
            <input type="text" id="userName" placeholder="您的姓名" required>
            <button class="pay-btn" onclick="processPayment()">支付 $19 并获取报告</button>
            <div class="close-modal" onclick="closePaymentModal()">取消</div>
        </div>
    </div>

    <script>
        const questions = [
            {text: "在职业转型过程中，我更倾向于通过社交网络和人脉来寻找新机会", dimension: "extraversion", reverse: false},
            {text: "当面对AI等新技术时，我喜欢与他人讨论和分享学习心得", dimension: "extraversion", reverse: false},
            {text: "在团队协作中，我经常主动承担沟通协调的角色", dimension: "extraversion", reverse: false},
            {text: "我更喜欢在安静的环境中独自思考人生规划和职业发展", dimension: "extraversion", reverse: true},
            {text: "面对职场挑战时，我倾向于独自分析问题而不是寻求他人建议", dimension: "extraversion", reverse: true},
            
            {text: "我对AI、机器学习等新兴技术充满好奇，愿意投入时间深入学习", dimension: "openness", reverse: false},
            {text: "在考虑职业转型时，我会主动探索跨行业的创新机会", dimension: "openness", reverse: false},
            {text: "我经常思考如何将创意和想象力融入到工作中", dimension: "openness", reverse: false},
            {text: "相比尝试新的工作方式，我更倾向于坚持已验证的传统方法", dimension: "openness", reverse: true},
            {text: "我认为在成熟稳定的行业工作比在快速变化的新兴领域更有安全感", dimension: "openness", reverse: true},
            
            {text: "在制定人生规划时，我会设定明确的阶段性目标和时间节点", dimension: "conscientiousness", reverse: false},
            {text: "我能够长期坚持学习新技能，即使过程枯燥也不轻易放弃", dimension: "conscientiousness", reverse: false},
            {text: "面对复杂的职业转型计划，我会制定详细的执行步骤", dimension: "conscientiousness", reverse: false},
            {text: "我经常因为被新的想法吸引而改变原有的计划和安排", dimension: "conscientiousness", reverse: true},
            {text: "在项目执行过程中，我更喜欢保持灵活性而非严格按计划进行", dimension: "conscientiousness", reverse: true},
            
            {text: "在团队决策中，我更注重达成共识而非推进个人观点", dimension: "agreeableness", reverse: false},
            {text: "我愿意花时间帮助同事适应新技术或解决工作困难", dimension: "agreeableness", reverse: false},
            {text: "在职场冲突中，我倾向于寻找双赢的解决方案", dimension: "agreeableness", reverse: false},
            {text: "在竞争激烈的环境中，我认为个人成功比维护团队和谐更重要", dimension: "agreeableness", reverse: true},
            {text: "我更擅长在需要果断决策和直接沟通的环境中工作", dimension: "agreeableness", reverse: true},
            
            {text: "面对职业转型的不确定性时，我经常感到焦虑和担忧", dimension: "neuroticism", reverse: false},
            {text: "当工作压力较大时，我的情绪容易受到影响", dimension: "neuroticism", reverse: false},
            {text: "我经常担心AI技术发展会对我的职业安全造成威胁", dimension: "neuroticism", reverse: false},
            {text: "即使面临重大挑战，我也能保持冷静和乐观的心态", dimension: "neuroticism", reverse: true},
            {text: "在高压环境下，我反而能发挥出更好的工作表现", dimension: "neuroticism", reverse: true},
            
            {text: "我能够快速理解和运用各种AI工具来提升工作效率", dimension: "ai_adaptability", reverse: false},
            {text: "我相信人工智能可以成为职业发展的助力而非威胁", dimension: "ai_adaptability", reverse: false},
            {text: "在数字化转型中，我更关注如何保持人的独特价值", dimension: "human_value", reverse: false},
            {text: "我倾向于将生活和工作进行清晰的边界划分", dimension: "life_integration", reverse: true},
            {text: "我对创业或成为自由职业者有浓厚的兴趣", dimension: "entrepreneurship", reverse: false}
        ];

        let currentAnswers = {};
        let testScores = {};

        function startTest() {
            document.getElementById('introSection').style.display = 'none';
            document.getElementById('personalityTest').style.display = 'block';
            initializeTest();
        }

        function initializeTest() {
            const form = document.getElementById('personalityTest');
            form.innerHTML = '';
            
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.innerHTML = `
                    <div class="question">${index + 1}. ${question.text}</div>
                    <div class="options">
                        ${[1,2,3,4,5].map(value => `
                            <label class="option" data-question="${index}" data-value="${value}">
                                <input type="radio" name="q${index}" value="${value}" required>
                                ${getScaleLabel(value)}
                            </label>
                        `).join('')}
                    </div>
                `;
                form.appendChild(questionDiv);
            });

            const submitDiv = document.createElement('div');
            submitDiv.style.textAlign = 'center';
            submitDiv.style.marginTop = '40px';
            submitDiv.innerHTML = `
                <button type="submit" class="submit-btn" id="submitBtn" disabled>查看我的结果 ✨</button>
            `;
            form.appendChild(submitDiv);

            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionIndex = this.dataset.question;
                    const value = this.dataset.value;
                    
                    document.querySelectorAll(`[data-question="${questionIndex}"]`).forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                    
                    currentAnswers[questionIndex] = parseInt(value);
                    updateProgress();
                });
            });

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                calculateAndShowPreview();
            });
        }

        function getScaleLabel(value) {
            const labels = {1: "完全不符合", 2: "不太符合", 3: "中性", 4: "比较符合", 5: "非常符合"};
            return labels[value];
        }

        function updateProgress() {
            const answered = Object.keys(currentAnswers).length;
            const total = questions.length;
            const percentage = (answered / total) * 100;
            document.getElementById('progress').style.width = percentage + '%';
            
            const submitBtn = document.getElementById('submitBtn');
            if (answered === total) {
                submitBtn.disabled = false;
            }
        }

        function calculateAndShowPreview() {
            const scores = {};
            const counts = {};
            
            const questionToDimension = {};
            questions.forEach((q, i) => {
                questionToDimension[i] = q.dimension;
            });
            
            const reverseQuestions = questions.map((q, i) => q.reverse ? i : null).filter(i => i !== null);

            ['extraversion', 'openness', 'conscientiousness', 'agreeableness', 'neuroticism', 'ai_adaptability', 'human_value', 'life_integration', 'entrepreneurship'].forEach(dimension => {
                scores[dimension] = 0;
                counts[dimension] = 0;
            });

            Object.keys(currentAnswers).forEach(questionIndex => {
                const qIndex = parseInt(questionIndex);
                const dimension = questionToDimension[qIndex];
                
                if (dimension) {
                    let score = currentAnswers[qIndex];
                    if (reverseQuestions.includes(qIndex)) {
                        score = 6 - score;
                    }
                    scores[dimension] += score;
                    counts[dimension]++;
                }
            });

            Object.keys(scores).forEach(dimension => {
                if (counts[dimension] > 0) {
                    const avgScore = scores[dimension] / counts[dimension];
                    scores[dimension] = Math.round((avgScore / 5) * 100);
                } else {
                    scores[dimension] = 0;
                }
            });

            testScores = scores;
            showPreviewResults(scores);
        }

        function showPreviewResults(scores) {
            document.getElementById('personalityTest').style.display = 'none';
            document.getElementById('previewResults').style.display = 'block';
            document.getElementById('progress').style.width = '100%';
            
            // 性格类型
            const personalityType = determinePersonalityType(scores);
            document.getElementById('personalityType').innerHTML = `
                <h3>${personalityType.name}</h3>
                <p>${personalityType.description}</p>
            `;
            
            // 维度预览
            const dimensionsHTML = `
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">💬 社交活力</span>
                        <span class="dimension-score">${scores.extraversion}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${scores.extraversion}%"></div></div>
                    <div class="preview-text">${getShortDescription('extraversion', scores.extraversion)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">深度分析内容、AI时代建议、具体案例...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">🔒 解锁完整分析</span>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">🧘 情绪稳定</span>
                        <span class="dimension-score">${100 - scores.neuroticism}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${100 - scores.neuroticism}%"></div></div>
                    <div class="preview-text">${getShortDescription('emotionalStability', 100 - scores.neuroticism)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">深度分析内容、AI时代建议、具体案例...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">🔒 解锁完整分析</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('dimensionsPreview').innerHTML = dimensionsHTML;
            
            // 滚动到结果
            document.getElementById('previewResults').scrollIntoView({ behavior: 'smooth' });
        }

        function determinePersonalityType(scores) {
            if (scores.openness >= 60 && scores.extraversion >= 60 && scores.conscientiousness >= 60) {
                return {name: "AI时代创新领导者", description: "您兼具开放思维、社交能力和执行力，是推动组织数字化转型的理想人选"};
            }
            if (scores.openness >= 60 && scores.conscientiousness >= 60) {
                return {name: "AI技术实践者", description: "您善于将新技术转化为实际应用，适合担任AI项目经理或技术顾问"};
            }
            if (scores.extraversion >= 60 && scores.agreeableness >= 60) {
                return {name: "人际关系建设者", description: "在AI自动化时代，您的人际协调能力是不可替代的核心优势"};
            }
            if (scores.openness >= 60 && scores.agreeableness >= 60) {
                return {name: "人文科技融合者", description: "您能在技术创新中保持人文关怀，适合用户体验设计和产品管理"};
            }
            if (scores.conscientiousness >= 60 && scores.agreeableness >= 60) {
                return {name: "可靠团队支柱", description: "您的稳定性和协作精神使您成为任何团队的宝贵资产"};
            }
            if (scores.openness >= 60) {
                return {name: "创意探索者", description: "您的开放思维让您在快速变化的AI时代保持竞争力"};
            }
            if (scores.extraversion >= 60) {
                return {name: "社交网络专家", description: "您擅长建立和维护关系，适合需要广泛人脉的角色"};
            }
            if (scores.conscientiousness >= 60) {
                return {name: "执行力专家", description: "您的可靠性和专注力是职业成功的坚实基础"};
            }
            return {name: "全面发展型人才", description: "您在各维度保持良好平衡，具有广泛的适应能力和发展潜力"};
        }

        function getShortDescription(dimension, score) {
            const level = score >= 70 ? 'high' : score >= 40 ? 'medium' : 'low';
            const descriptions = {
                extraversion: {
                    high: "您天生具备出色的社交能力和团队领导力",
                    medium: "您在社交和独处之间保持良好平衡",
                    low: "您更倾向于深度工作和专注思考"
                },
                openness: {
                    high: "您对新技术保持高度开放和好奇心",
                    medium: "您对新事物持谨慎而开放的态度",
                    low: "您更信任经过时间考验的方法"
                },
                conscientiousness: {
                    high: "您是高度自律和可靠的人",
                    medium: "您在计划性和灵活性之间保持平衡",
                    low: "您喜欢保持灵活性和自发性"
                },
                agreeableness: {
                    high: "您是天生的团队协作者",
                    medium: "您在协作和个人主张之间保持平衡",
                    low: "您更注重效率和结果"
                },
                emotionalStability: {
                    high: "您具有出色的情绪稳定性和抗压能力",
                    medium: "您的情绪状态整体稳定",
                    low: "您对环境变化较为敏感"
                }
            };
            return descriptions[dimension]?.[level] || "您在这个维度展现独特特质";
        }

        function showPaymentModal() {
            document.getElementById('paymentModal').classList.add('active');
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
        }

        async function processPayment() {
            const email = document.getElementById('userEmail').value.trim();
            const name = document.getElementById('userName').value.trim();
            
            if (!email || !name) {
                alert('请填写邮箱和姓名');
                return;
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('请输入有效的邮箱地址');
                return;
            }
            
            try {
                const response = await fetch('/api/create-stripe-payment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        product_name: '详细性格分析报告',
                        description: 'AI共创人生 - 个性化分析报告',
                        amount: 1900,
                        email: email,
                        name: name,
                        age_group: '未指定',
                        product_type: 'report',
                        scores: testScores,
                        base_url: window.location.origin
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    window.location.href = result.url;
                } else {
                    alert('创建支付失败，请重试或联系客服');
                }
            } catch (error) {
                console.error('支付创建失败:', error);
                alert('网络错误，请稍后重试');
            }
        }
    </script>
</body>
</html>锁完整分析</span>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">💡 创新开放</span>
                        <span class="dimension-score">${scores.openness}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${scores.openness}%"></div></div>
                    <div class="preview-text">${getShortDescription('openness', scores.openness)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">深度分析内容、AI时代建议、具体案例...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">🔒 解锁完整分析</span>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">⚡ 执行可靠</span>
                        <span class="dimension-score">${scores.conscientiousness}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${scores.conscientiousness}%"></div></div>
                    <div class="preview-text">${getShortDescription('conscientiousness', scores.conscientiousness)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">深度分析内容、AI时代建议、具体案例...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">🔒 解锁完整分析</span>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">🤝 协作共情</span>
                        <span class="dimension-score">${scores.agreeableness}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${scores.agreeableness}%"></div></div>
                    <div class="preview-text">${getShortDescription('agreeableness', scores.agreeableness)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">深度分析内容、AI时代建议、具体案例...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">🔒 解
