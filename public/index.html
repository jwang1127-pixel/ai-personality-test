<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå…±åˆ›äººç”Ÿ - æ€§æ ¼è¯„ä¼°æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .content {
            padding: 40px;
        }
        
        .intro-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .intro-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .intro-section p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .start-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            margin-top: 20px;
        }
        
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }
        
        .question-container {
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.6s ease forwards;
        }
        
        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .question {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
            line-height: 1.6;
        }
        
        .options {
            display: grid;
            gap: 10px;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }
        
        .option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .option.selected {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: 2px solid #0066cc;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            transition: width 0.3s ease;
            z-index: 1000;
        }
        
        /* ç»“æœé¢„è§ˆæ ·å¼ */
        .preview-results {
            display: none;
        }
        
        .preview-header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .preview-header h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .personality-type {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .personality-type h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        
        .dimension-preview {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .dimension-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .dimension-name {
            font-size: 1.2em;
            font-weight: 600;
            color: #4facfe;
        }
        
        .dimension-score {
            font-size: 1.5em;
            font-weight: 700;
            color: #333;
        }
        
        .score-bar {
            background: #e0e0e0;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 6px;
            transition: width 1s ease;
        }
        
        .preview-text {
            color: #666;
            line-height: 1.6;
            margin-top: 10px;
        }
        
        .blurred-content {
            position: relative;
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }
        
        .blur-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .unlock-badge {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        
        .cta-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-top: 40px;
        }
        
        .cta-section h3 {
            font-size: 1.8em;
            margin-bottom: 20px;
        }
        
        .cta-section ul {
            text-align: left;
            max-width: 500px;
            margin: 20px auto;
            line-height: 2;
        }
        
        .cta-section li {
            margin-bottom: 10px;
        }
        
        .price {
            font-size: 2.5em;
            font-weight: 700;
            margin: 20px 0;
            color: #FFD700;
        }
        
        .unlock-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 18px 50px;
            font-size: 1.3em;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }
        
        .unlock-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        /* æ”¯ä»˜è¡¨å•å¼¹çª— */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .payment-modal.active {
            display: flex;
        }
        
        .payment-form {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .payment-form h3 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .payment-form input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }
        
        .payment-form input:focus {
            outline: none;
            border-color: #4facfe;
        }
        
        .pay-btn {
            width: 100%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .pay-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }
        
        .close-modal {
            text-align: center;
            margin-top: 15px;
            color: #999;
            cursor: pointer;
        }
        
        .close-modal:hover {
            color: #666;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            .content {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="progress" id="progress"></div>
    
    <div class="container">
        <div class="header">
            <h1>ğŸ§  AIå…±åˆ›äººç”Ÿ</h1>
            <p>ä¸“ä¸šæ€§æ ¼è¯„ä¼°æµ‹è¯•</p>
        </div>
        
        <div class="content">
            <!-- ä»‹ç»å’Œå¼€å§‹æŒ‰é’® -->
            <div class="intro-section" id="introSection">
                <h2>ğŸŒŸ å‘ç°æ‚¨çš„AIæ—¶ä»£ç‹¬ç‰¹ä¼˜åŠ¿</h2>
                <p>30é“ç§‘å­¦é—®é¢˜ï¼Œ5åˆ†é’Ÿæ·±åº¦æµ‹è¯•</p>
                <p>ç«‹å³äº†è§£æ‚¨åœ¨AIæ—¶ä»£çš„æ€§æ ¼ä¼˜åŠ¿å’Œå‘å±•æ–¹å‘</p>
                <p style="margin-top: 20px; font-size: 0.9em; color: #999;">
                    âœ“ æ— éœ€æ³¨å†Œ âœ“ ç«‹å³å¼€å§‹ âœ“ å…è´¹é¢„è§ˆç»“æœ
                </p>
                <button class="start-btn" onclick="startTest()">å¼€å§‹å…è´¹æµ‹è¯•</button>
            </div>
            
            <!-- æµ‹è¯•è¡¨å• -->
            <form id="personalityTest" style="display: none;">
                <!-- é—®é¢˜å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </form>
            
            <!-- ç»“æœé¢„è§ˆ -->
            <div class="preview-results" id="previewResults">
                <div class="preview-header">
                    <h2>ğŸ‰ æ‚¨çš„æ€§æ ¼åˆ†æç»“æœ</h2>
                    <p>ä»¥ä¸‹æ˜¯æ‚¨çš„åŸºç¡€åˆ†æé¢„è§ˆ</p>
                </div>
                
                <div class="personality-type" id="personalityType">
                    <!-- æ€§æ ¼ç±»å‹å°†åŠ¨æ€å¡«å…… -->
                </div>
                
                <div id="dimensionsPreview">
                    <!-- ç»´åº¦é¢„è§ˆå°†åŠ¨æ€å¡«å…… -->
                </div>
                
                <!-- CTAåŒºåŸŸ -->
                <div class="cta-section">
                    <h3>ğŸ“Š æƒ³è¦å®Œæ•´çš„3000å­—ä¸“ä¸šæŠ¥å‘Šï¼Ÿ</h3>
                    <ul>
                        <li>âœ“ æ¯ä¸ªç»´åº¦çš„æ·±åº¦è§£æå’Œå…·ä½“æ¡ˆä¾‹</li>
                        <li>âœ“ AIæ—¶ä»£èŒä¸šå‘å±•å»ºè®®å’Œè·¯å¾„è§„åˆ’</li>
                        <li>âœ“ 30å¤©è¡ŒåŠ¨è®¡åˆ’å’Œå¯æ‰§è¡Œæ­¥éª¤</li>
                        <li>âœ“ æ¨èèµ„æºå’Œå­¦ä¹ è·¯å¾„</li>
                        <li>âœ“ ç‹åšå£«ä¸“ä¸šç‚¹è¯„</li>
                        <li>âœ“ æ°¸ä¹…ä¿å­˜ï¼Œéšæ—¶æŸ¥é˜…</li>
                    </ul>
                    <div class="price">$19</div>
                    <p style="font-size: 0.9em; opacity: 0.9;">Betaæµ‹è¯•ç‰¹ä»· | åŸä»· $49</p>
                    <button class="unlock-btn" onclick="showPaymentModal()">è·å–å®Œæ•´æŠ¥å‘Š</button>
                    <p style="font-size: 0.9em; margin-top: 20px; opacity: 0.8;">
                        ğŸ”’ æ”¯ä»˜å®‰å…¨ç”±Stripeä¿æŠ¤ | ğŸ’¯ ä¸æ»¡æ„å…¨é¢é€€æ¬¾
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ”¯ä»˜å¼¹çª— -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-form">
            <h3>ğŸ“§ æ¥æ”¶å®Œæ•´æŠ¥å‘Š</h3>
            <p style="text-align: center; color: #666; margin-bottom: 20px;">
                æŠ¥å‘Šå°†å‘é€åˆ°æ‚¨çš„é‚®ç®±
            </p>
            <input type="email" id="userEmail" placeholder="æ‚¨çš„é‚®ç®±åœ°å€" required>
            <input type="text" id="userName" placeholder="æ‚¨çš„å§“å" required>
            <button class="pay-btn" onclick="processPayment()">æ”¯ä»˜ $19 å¹¶è·å–æŠ¥å‘Š</button>
            <div class="close-modal" onclick="closePaymentModal()">å–æ¶ˆ</div>
        </div>
    </div>

    <script>
        const questions = [
            {text: "åœ¨èŒä¸šè½¬å‹è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ›´å€¾å‘äºé€šè¿‡ç¤¾äº¤ç½‘ç»œå’Œäººè„‰æ¥å¯»æ‰¾æ–°æœºä¼š", dimension: "extraversion", reverse: false},
            {text: "å½“é¢å¯¹AIç­‰æ–°æŠ€æœ¯æ—¶ï¼Œæˆ‘å–œæ¬¢ä¸ä»–äººè®¨è®ºå’Œåˆ†äº«å­¦ä¹ å¿ƒå¾—", dimension: "extraversion", reverse: false},
            {text: "åœ¨å›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘ç»å¸¸ä¸»åŠ¨æ‰¿æ‹…æ²Ÿé€šåè°ƒçš„è§’è‰²", dimension: "extraversion", reverse: false},
            {text: "æˆ‘æ›´å–œæ¬¢åœ¨å®‰é™çš„ç¯å¢ƒä¸­ç‹¬è‡ªæ€è€ƒäººç”Ÿè§„åˆ’å’ŒèŒä¸šå‘å±•", dimension: "extraversion", reverse: true},
            {text: "é¢å¯¹èŒåœºæŒ‘æˆ˜æ—¶ï¼Œæˆ‘å€¾å‘äºç‹¬è‡ªåˆ†æé—®é¢˜è€Œä¸æ˜¯å¯»æ±‚ä»–äººå»ºè®®", dimension: "extraversion", reverse: true},
            
            {text: "æˆ‘å¯¹AIã€æœºå™¨å­¦ä¹ ç­‰æ–°å…´æŠ€æœ¯å……æ»¡å¥½å¥‡ï¼Œæ„¿æ„æŠ•å…¥æ—¶é—´æ·±å…¥å­¦ä¹ ", dimension: "openness", reverse: false},
            {text: "åœ¨è€ƒè™‘èŒä¸šè½¬å‹æ—¶ï¼Œæˆ‘ä¼šä¸»åŠ¨æ¢ç´¢è·¨è¡Œä¸šçš„åˆ›æ–°æœºä¼š", dimension: "openness", reverse: false},
            {text: "æˆ‘ç»å¸¸æ€è€ƒå¦‚ä½•å°†åˆ›æ„å’Œæƒ³è±¡åŠ›èå…¥åˆ°å·¥ä½œä¸­", dimension: "openness", reverse: false},
            {text: "ç›¸æ¯”å°è¯•æ–°çš„å·¥ä½œæ–¹å¼ï¼Œæˆ‘æ›´å€¾å‘äºåšæŒå·²éªŒè¯çš„ä¼ ç»Ÿæ–¹æ³•", dimension: "openness", reverse: true},
            {text: "æˆ‘è®¤ä¸ºåœ¨æˆç†Ÿç¨³å®šçš„è¡Œä¸šå·¥ä½œæ¯”åœ¨å¿«é€Ÿå˜åŒ–çš„æ–°å…´é¢†åŸŸæ›´æœ‰å®‰å…¨æ„Ÿ", dimension: "openness", reverse: true},
            
            {text: "åœ¨åˆ¶å®šäººç”Ÿè§„åˆ’æ—¶ï¼Œæˆ‘ä¼šè®¾å®šæ˜ç¡®çš„é˜¶æ®µæ€§ç›®æ ‡å’Œæ—¶é—´èŠ‚ç‚¹", dimension: "conscientiousness", reverse: false},
            {text: "æˆ‘èƒ½å¤Ÿé•¿æœŸåšæŒå­¦ä¹ æ–°æŠ€èƒ½ï¼Œå³ä½¿è¿‡ç¨‹æ¯ç‡¥ä¹Ÿä¸è½»æ˜“æ”¾å¼ƒ", dimension: "conscientiousness", reverse: false},
            {text: "é¢å¯¹å¤æ‚çš„èŒä¸šè½¬å‹è®¡åˆ’ï¼Œæˆ‘ä¼šåˆ¶å®šè¯¦ç»†çš„æ‰§è¡Œæ­¥éª¤", dimension: "conscientiousness", reverse: false},
            {text: "æˆ‘ç»å¸¸å› ä¸ºè¢«æ–°çš„æƒ³æ³•å¸å¼•è€Œæ”¹å˜åŸæœ‰çš„è®¡åˆ’å’Œå®‰æ’", dimension: "conscientiousness", reverse: true},
            {text: "åœ¨é¡¹ç›®æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘æ›´å–œæ¬¢ä¿æŒçµæ´»æ€§è€Œéä¸¥æ ¼æŒ‰è®¡åˆ’è¿›è¡Œ", dimension: "conscientiousness", reverse: true},
            
            {text: "åœ¨å›¢é˜Ÿå†³ç­–ä¸­ï¼Œæˆ‘æ›´æ³¨é‡è¾¾æˆå…±è¯†è€Œéæ¨è¿›ä¸ªäººè§‚ç‚¹", dimension: "agreeableness", reverse: false},
            {text: "æˆ‘æ„¿æ„èŠ±æ—¶é—´å¸®åŠ©åŒäº‹é€‚åº”æ–°æŠ€æœ¯æˆ–è§£å†³å·¥ä½œå›°éš¾", dimension: "agreeableness", reverse: false},
            {text: "åœ¨èŒåœºå†²çªä¸­ï¼Œæˆ‘å€¾å‘äºå¯»æ‰¾åŒèµ¢çš„è§£å†³æ–¹æ¡ˆ", dimension: "agreeableness", reverse: false},
            {text: "åœ¨ç«äº‰æ¿€çƒˆçš„ç¯å¢ƒä¸­ï¼Œæˆ‘è®¤ä¸ºä¸ªäººæˆåŠŸæ¯”ç»´æŠ¤å›¢é˜Ÿå’Œè°æ›´é‡è¦", dimension: "agreeableness", reverse: true},
            {text: "æˆ‘æ›´æ“…é•¿åœ¨éœ€è¦æœæ–­å†³ç­–å’Œç›´æ¥æ²Ÿé€šçš„ç¯å¢ƒä¸­å·¥ä½œ", dimension: "agreeableness", reverse: true},
            
            {text: "é¢å¯¹èŒä¸šè½¬å‹çš„ä¸ç¡®å®šæ€§æ—¶ï¼Œæˆ‘ç»å¸¸æ„Ÿåˆ°ç„¦è™‘å’Œæ‹…å¿§", dimension: "neuroticism", reverse: false},
            {text: "å½“å·¥ä½œå‹åŠ›è¾ƒå¤§æ—¶ï¼Œæˆ‘çš„æƒ…ç»ªå®¹æ˜“å—åˆ°å½±å“", dimension: "neuroticism", reverse: false},
            {text: "æˆ‘ç»å¸¸æ‹…å¿ƒAIæŠ€æœ¯å‘å±•ä¼šå¯¹æˆ‘çš„èŒä¸šå®‰å…¨é€ æˆå¨èƒ", dimension: "neuroticism", reverse: false},
            {text: "å³ä½¿é¢ä¸´é‡å¤§æŒ‘æˆ˜ï¼Œæˆ‘ä¹Ÿèƒ½ä¿æŒå†·é™å’Œä¹è§‚çš„å¿ƒæ€", dimension: "neuroticism", reverse: true},
            {text: "åœ¨é«˜å‹ç¯å¢ƒä¸‹ï¼Œæˆ‘åè€Œèƒ½å‘æŒ¥å‡ºæ›´å¥½çš„å·¥ä½œè¡¨ç°", dimension: "neuroticism", reverse: true},
            
            {text: "æˆ‘èƒ½å¤Ÿå¿«é€Ÿç†è§£å’Œè¿ç”¨å„ç§AIå·¥å…·æ¥æå‡å·¥ä½œæ•ˆç‡", dimension: "ai_adaptability", reverse: false},
            {text: "æˆ‘ç›¸ä¿¡äººå·¥æ™ºèƒ½å¯ä»¥æˆä¸ºèŒä¸šå‘å±•çš„åŠ©åŠ›è€Œéå¨èƒ", dimension: "ai_adaptability", reverse: false},
            {text: "åœ¨æ•°å­—åŒ–è½¬å‹ä¸­ï¼Œæˆ‘æ›´å…³æ³¨å¦‚ä½•ä¿æŒäººçš„ç‹¬ç‰¹ä»·å€¼", dimension: "human_value", reverse: false},
            {text: "æˆ‘å€¾å‘äºå°†ç”Ÿæ´»å’Œå·¥ä½œè¿›è¡Œæ¸…æ™°çš„è¾¹ç•Œåˆ’åˆ†", dimension: "life_integration", reverse: true},
            {text: "æˆ‘å¯¹åˆ›ä¸šæˆ–æˆä¸ºè‡ªç”±èŒä¸šè€…æœ‰æµ“åšçš„å…´è¶£", dimension: "entrepreneurship", reverse: false}
        ];

        let currentAnswers = {};
        let testScores = {};

        function startTest() {
            document.getElementById('introSection').style.display = 'none';
            document.getElementById('personalityTest').style.display = 'block';
            initializeTest();
        }

        function initializeTest() {
            const form = document.getElementById('personalityTest');
            form.innerHTML = '';
            
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.innerHTML = `
                    <div class="question">${index + 1}. ${question.text}</div>
                    <div class="options">
                        ${[1,2,3,4,5].map(value => `
                            <label class="option" data-question="${index}" data-value="${value}">
                                <input type="radio" name="q${index}" value="${value}" required>
                                ${getScaleLabel(value)}
                            </label>
                        `).join('')}
                    </div>
                `;
                form.appendChild(questionDiv);
            });

            const submitDiv = document.createElement('div');
            submitDiv.style.textAlign = 'center';
            submitDiv.style.marginTop = '40px';
            submitDiv.innerHTML = `
                <button type="submit" class="submit-btn" id="submitBtn" disabled>æŸ¥çœ‹æˆ‘çš„ç»“æœ âœ¨</button>
            `;
            form.appendChild(submitDiv);

            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionIndex = this.dataset.question;
                    const value = this.dataset.value;
                    
                    document.querySelectorAll(`[data-question="${questionIndex}"]`).forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                    
                    currentAnswers[questionIndex] = parseInt(value);
                    updateProgress();
                });
            });

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                calculateAndShowPreview();
            });
        }

        function getScaleLabel(value) {
            const labels = {1: "å®Œå…¨ä¸ç¬¦åˆ", 2: "ä¸å¤ªç¬¦åˆ", 3: "ä¸­æ€§", 4: "æ¯”è¾ƒç¬¦åˆ", 5: "éå¸¸ç¬¦åˆ"};
            return labels[value];
        }

        function updateProgress() {
            const answered = Object.keys(currentAnswers).length;
            const total = questions.length;
            const percentage = (answered / total) * 100;
            document.getElementById('progress').style.width = percentage + '%';
            
            const submitBtn = document.getElementById('submitBtn');
            if (answered === total) {
                submitBtn.disabled = false;
            }
        }

        function calculateAndShowPreview() {
            const scores = {};
            const counts = {};
            
            const questionToDimension = {};
            questions.forEach((q, i) => {
                questionToDimension[i] = q.dimension;
            });
            
            const reverseQuestions = questions.map((q, i) => q.reverse ? i : null).filter(i => i !== null);

            ['extraversion', 'openness', 'conscientiousness', 'agreeableness', 'neuroticism', 'ai_adaptability', 'human_value', 'life_integration', 'entrepreneurship'].forEach(dimension => {
                scores[dimension] = 0;
                counts[dimension] = 0;
            });

            Object.keys(currentAnswers).forEach(questionIndex => {
                const qIndex = parseInt(questionIndex);
                const dimension = questionToDimension[qIndex];
                
                if (dimension) {
                    let score = currentAnswers[qIndex];
                    if (reverseQuestions.includes(qIndex)) {
                        score = 6 - score;
                    }
                    scores[dimension] += score;
                    counts[dimension]++;
                }
            });

            Object.keys(scores).forEach(dimension => {
                if (counts[dimension] > 0) {
                    const avgScore = scores[dimension] / counts[dimension];
                    scores[dimension] = Math.round((avgScore / 5) * 100);
                } else {
                    scores[dimension] = 0;
                }
            });

            testScores = scores;
            showPreviewResults(scores);
        }

        function showPreviewResults(scores) {
            document.getElementById('personalityTest').style.display = 'none';
            document.getElementById('previewResults').style.display = 'block';
            document.getElementById('progress').style.width = '100%';
            
            // æ€§æ ¼ç±»å‹
            const personalityType = determinePersonalityType(scores);
            document.getElementById('personalityType').innerHTML = `
                <h3>${personalityType.name}</h3>
                <p>${personalityType.description}</p>
            `;
            
            // ç»´åº¦é¢„è§ˆ
            const dimensionsHTML = `
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">ğŸ’¬ ç¤¾äº¤æ´»åŠ›</span>
                        <span class="dimension-score">${scores.extraversion}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${scores.extraversion}%"></div></div>
                    <div class="preview-text">${getShortDescription('extraversion', scores.extraversion)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">æ·±åº¦åˆ†æå†…å®¹ã€AIæ—¶ä»£å»ºè®®ã€å…·ä½“æ¡ˆä¾‹...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">ğŸ”’ è§£é”å®Œæ•´åˆ†æ</span>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">ğŸ§˜ æƒ…ç»ªç¨³å®š</span>
                        <span class="dimension-score">${100 - scores.neuroticism}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${100 - scores.neuroticism}%"></div></div>
                    <div class="preview-text">${getShortDescription('emotionalStability', 100 - scores.neuroticism)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">æ·±åº¦åˆ†æå†…å®¹ã€AIæ—¶ä»£å»ºè®®ã€å…·ä½“æ¡ˆä¾‹...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">ğŸ”’ è§£é”å®Œæ•´åˆ†æ</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('dimensionsPreview').innerHTML = dimensionsHTML;
            
            // æ»šåŠ¨åˆ°ç»“æœ
            document.getElementById('previewResults').scrollIntoView({ behavior: 'smooth' });
        }

        function determinePersonalityType(scores) {
            if (scores.openness >= 60 && scores.extraversion >= 60 && scores.conscientiousness >= 60) {
                return {name: "AIæ—¶ä»£åˆ›æ–°é¢†å¯¼è€…", description: "æ‚¨å…¼å…·å¼€æ”¾æ€ç»´ã€ç¤¾äº¤èƒ½åŠ›å’Œæ‰§è¡ŒåŠ›ï¼Œæ˜¯æ¨åŠ¨ç»„ç»‡æ•°å­—åŒ–è½¬å‹çš„ç†æƒ³äººé€‰"};
            }
            if (scores.openness >= 60 && scores.conscientiousness >= 60) {
                return {name: "AIæŠ€æœ¯å®è·µè€…", description: "æ‚¨å–„äºå°†æ–°æŠ€æœ¯è½¬åŒ–ä¸ºå®é™…åº”ç”¨ï¼Œé€‚åˆæ‹…ä»»AIé¡¹ç›®ç»ç†æˆ–æŠ€æœ¯é¡¾é—®"};
            }
            if (scores.extraversion >= 60 && scores.agreeableness >= 60) {
                return {name: "äººé™…å…³ç³»å»ºè®¾è€…", description: "åœ¨AIè‡ªåŠ¨åŒ–æ—¶ä»£ï¼Œæ‚¨çš„äººé™…åè°ƒèƒ½åŠ›æ˜¯ä¸å¯æ›¿ä»£çš„æ ¸å¿ƒä¼˜åŠ¿"};
            }
            if (scores.openness >= 60 && scores.agreeableness >= 60) {
                return {name: "äººæ–‡ç§‘æŠ€èåˆè€…", description: "æ‚¨èƒ½åœ¨æŠ€æœ¯åˆ›æ–°ä¸­ä¿æŒäººæ–‡å…³æ€€ï¼Œé€‚åˆç”¨æˆ·ä½“éªŒè®¾è®¡å’Œäº§å“ç®¡ç†"};
            }
            if (scores.conscientiousness >= 60 && scores.agreeableness >= 60) {
                return {name: "å¯é å›¢é˜Ÿæ”¯æŸ±", description: "æ‚¨çš„ç¨³å®šæ€§å’Œåä½œç²¾ç¥ä½¿æ‚¨æˆä¸ºä»»ä½•å›¢é˜Ÿçš„å®è´µèµ„äº§"};
            }
            if (scores.openness >= 60) {
                return {name: "åˆ›æ„æ¢ç´¢è€…", description: "æ‚¨çš„å¼€æ”¾æ€ç»´è®©æ‚¨åœ¨å¿«é€Ÿå˜åŒ–çš„AIæ—¶ä»£ä¿æŒç«äº‰åŠ›"};
            }
            if (scores.extraversion >= 60) {
                return {name: "ç¤¾äº¤ç½‘ç»œä¸“å®¶", description: "æ‚¨æ“…é•¿å»ºç«‹å’Œç»´æŠ¤å…³ç³»ï¼Œé€‚åˆéœ€è¦å¹¿æ³›äººè„‰çš„è§’è‰²"};
            }
            if (scores.conscientiousness >= 60) {
                return {name: "æ‰§è¡ŒåŠ›ä¸“å®¶", description: "æ‚¨çš„å¯é æ€§å’Œä¸“æ³¨åŠ›æ˜¯èŒä¸šæˆåŠŸçš„åšå®åŸºç¡€"};
            }
            return {name: "å…¨é¢å‘å±•å‹äººæ‰", description: "æ‚¨åœ¨å„ç»´åº¦ä¿æŒè‰¯å¥½å¹³è¡¡ï¼Œå…·æœ‰å¹¿æ³›çš„é€‚åº”èƒ½åŠ›å’Œå‘å±•æ½œåŠ›"};
        }

        function getShortDescription(dimension, score) {
            const level = score >= 70 ? 'high' : score >= 40 ? 'medium' : 'low';
            const descriptions = {
                extraversion: {
                    high: "æ‚¨å¤©ç”Ÿå…·å¤‡å‡ºè‰²çš„ç¤¾äº¤èƒ½åŠ›å’Œå›¢é˜Ÿé¢†å¯¼åŠ›",
                    medium: "æ‚¨åœ¨ç¤¾äº¤å’Œç‹¬å¤„ä¹‹é—´ä¿æŒè‰¯å¥½å¹³è¡¡",
                    low: "æ‚¨æ›´å€¾å‘äºæ·±åº¦å·¥ä½œå’Œä¸“æ³¨æ€è€ƒ"
                },
                openness: {
                    high: "æ‚¨å¯¹æ–°æŠ€æœ¯ä¿æŒé«˜åº¦å¼€æ”¾å’Œå¥½å¥‡å¿ƒ",
                    medium: "æ‚¨å¯¹æ–°äº‹ç‰©æŒè°¨æ…è€Œå¼€æ”¾çš„æ€åº¦",
                    low: "æ‚¨æ›´ä¿¡ä»»ç»è¿‡æ—¶é—´è€ƒéªŒçš„æ–¹æ³•"
                },
                conscientiousness: {
                    high: "æ‚¨æ˜¯é«˜åº¦è‡ªå¾‹å’Œå¯é çš„äºº",
                    medium: "æ‚¨åœ¨è®¡åˆ’æ€§å’Œçµæ´»æ€§ä¹‹é—´ä¿æŒå¹³è¡¡",
                    low: "æ‚¨å–œæ¬¢ä¿æŒçµæ´»æ€§å’Œè‡ªå‘æ€§"
                },
                agreeableness: {
                    high: "æ‚¨æ˜¯å¤©ç”Ÿçš„å›¢é˜Ÿåä½œè€…",
                    medium: "æ‚¨åœ¨åä½œå’Œä¸ªäººä¸»å¼ ä¹‹é—´ä¿æŒå¹³è¡¡",
                    low: "æ‚¨æ›´æ³¨é‡æ•ˆç‡å’Œç»“æœ"
                },
                emotionalStability: {
                    high: "æ‚¨å…·æœ‰å‡ºè‰²çš„æƒ…ç»ªç¨³å®šæ€§å’ŒæŠ—å‹èƒ½åŠ›",
                    medium: "æ‚¨çš„æƒ…ç»ªçŠ¶æ€æ•´ä½“ç¨³å®š",
                    low: "æ‚¨å¯¹ç¯å¢ƒå˜åŒ–è¾ƒä¸ºæ•æ„Ÿ"
                }
            };
            return descriptions[dimension]?.[level] || "æ‚¨åœ¨è¿™ä¸ªç»´åº¦å±•ç°ç‹¬ç‰¹ç‰¹è´¨";
        }

        function showPaymentModal() {
            document.getElementById('paymentModal').classList.add('active');
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
        }

        async function processPayment() {
            const email = document.getElementById('userEmail').value.trim();
            const name = document.getElementById('userName').value.trim();
            
            if (!email || !name) {
                alert('è¯·å¡«å†™é‚®ç®±å’Œå§“å');
                return;
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€');
                return;
            }
            
            try {
                const response = await fetch('/api/create-stripe-payment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        product_name: 'è¯¦ç»†æ€§æ ¼åˆ†ææŠ¥å‘Š',
                        description: 'AIå…±åˆ›äººç”Ÿ - ä¸ªæ€§åŒ–åˆ†ææŠ¥å‘Š',
                        amount: 1900,
                        email: email,
                        name: name,
                        age_group: 'æœªæŒ‡å®š',
                        product_type: 'report',
                        scores: testScores,
                        base_url: window.location.origin
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    window.location.href = result.url;
                } else {
                    alert('åˆ›å»ºæ”¯ä»˜å¤±è´¥ï¼Œè¯·é‡è¯•æˆ–è”ç³»å®¢æœ');
                }
            } catch (error) {
                console.error('æ”¯ä»˜åˆ›å»ºå¤±è´¥:', error);
                alert('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
            }
        }
    </script>
</body>
</html>é”å®Œæ•´åˆ†æ</span>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">ğŸ’¡ åˆ›æ–°å¼€æ”¾</span>
                        <span class="dimension-score">${scores.openness}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${scores.openness}%"></div></div>
                    <div class="preview-text">${getShortDescription('openness', scores.openness)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">æ·±åº¦åˆ†æå†…å®¹ã€AIæ—¶ä»£å»ºè®®ã€å…·ä½“æ¡ˆä¾‹...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">ğŸ”’ è§£é”å®Œæ•´åˆ†æ</span>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">âš¡ æ‰§è¡Œå¯é </span>
                        <span class="dimension-score">${scores.conscientiousness}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${scores.conscientiousness}%"></div></div>
                    <div class="preview-text">${getShortDescription('conscientiousness', scores.conscientiousness)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">æ·±åº¦åˆ†æå†…å®¹ã€AIæ—¶ä»£å»ºè®®ã€å…·ä½“æ¡ˆä¾‹...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">ğŸ”’ è§£é”å®Œæ•´åˆ†æ</span>
                        </div>
                    </div>
                </div>
                
                <div class="dimension-preview">
                    <div class="dimension-header">
                        <span class="dimension-name">ğŸ¤ åä½œå…±æƒ…</span>
                        <span class="dimension-score">${scores.agreeableness}%</span>
                    </div>
                    <div class="score-bar"><div class="score-fill" style="width: ${scores.agreeableness}%"></div></div>
                    <div class="preview-text">${getShortDescription('agreeableness', scores.agreeableness)}</div>
                    <div class="blurred-content">
                        <p style="color: #999;">æ·±åº¦åˆ†æå†…å®¹ã€AIæ—¶ä»£å»ºè®®ã€å…·ä½“æ¡ˆä¾‹...</p>
                        <div class="blur-overlay">
                            <span class="unlock-badge">ğŸ”’ è§£
